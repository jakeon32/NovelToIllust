fix(core): Implement smart fallback for reference filtering

This commit introduces a more robust, two-step filtering strategy for characters and backgrounds to handle inconsistencies from the scene generation AI.

- Reverts the `generate-scenes.ts` prompt to a less strict version to improve the chance of getting some data.
- Implements a "smart fallback" in `generate-illustration.ts` and `generate-prompt.ts`:
  1. First, it attempts to filter references using the accurate, structured data.
  2. If that yields no results, it falls back to a regex search on the free-text summary.
- This prevents both the "all references included" and "no references included" errors, creating a more resilient system.
- Also includes the previously implemented null check for `artStyle` to prevent crashes.