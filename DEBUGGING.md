# ğŸ” ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ ì ìš© ë””ë²„ê¹… ê°€ì´ë“œ

ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ê°€ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•Šì„ ë•Œ ë¬¸ì œë¥¼ ì°¾ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

## 1. ê°œë°œì ë„êµ¬ ì—´ê¸°

**ë¸Œë¼ìš°ì €:**
- Chrome/Edge: `F12` ë˜ëŠ” `Ctrl+Shift+I` (Mac: `Cmd+Option+I`)
- Firefox: `F12` ë˜ëŠ” `Ctrl+Shift+K` (Mac: `Cmd+Option+K`)

**Console íƒ­ ì—´ê¸°**

## 2. ì´ë¯¸ì§€ ìƒì„± ì‹œë„

1. ì•±ì—ì„œ "ì´ë¯¸ì§€ ìƒì„±" ë²„íŠ¼ í´ë¦­
2. Consoleì— ì¶œë ¥ë˜ëŠ” ë¡œê·¸ í™•ì¸

## 3. ë¡œê·¸ ë¶„ì„

### ğŸ“ ì²´í¬í¬ì¸íŠ¸ 1: í”„ë¡ íŠ¸ì—”ë“œ ë°ì´í„° ì¤€ë¹„
```
====================================================================================================
ğŸ¨ FRONTEND: Preparing data for API call
====================================================================================================
```

**í™•ì¸ ì‚¬í•­:**
- âœ… `Characters to send: X` - ìºë¦­í„° ê°œìˆ˜ê°€ 0ì´ ì•„ë‹Œê°€?
- âœ… ê° ìºë¦­í„°ì˜ `hasImage: true` ì¸ê°€?
- âœ… `imageSize: XXXXX` - ì´ë¯¸ì§€ í¬ê¸°ê°€ 0ì´ ì•„ë‹Œê°€?
- âœ… `hasDescription: true` - ë¶„ì„ ë‚´ìš©ì´ ìˆëŠ”ê°€?
- âœ… ë°°ê²½, ì•„íŠ¸ ìŠ¤íƒ€ì¼ë„ ë™ì¼í•˜ê²Œ í™•ì¸

**ë¬¸ì œ ë°œê²¬ ì‹œ:**
- `hasImage: false` â†’ ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë“±ë¡í•˜ì„¸ìš”
- `imageSize: 0` â†’ ì´ë¯¸ì§€ ì—…ë¡œë“œê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”
- `hasDescription: false` â†’ AI ë¶„ì„ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì ì‹œ ê¸°ë‹¤ë¦° í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”

---

### ğŸ“ ì²´í¬í¬ì¸íŠ¸ 2: API ë°ì´í„° ìˆ˜ì‹  (Vercel ì„œë²„)
```
====================================================================================================
ğŸ” DEBUGGING: generate-illustration.ts received data
====================================================================================================
```

**í™•ì¸ ì‚¬í•­:**
- âœ… `Characters received: X` - í”„ë¡ íŠ¸ì—”ë“œì™€ ê°™ì€ ê°œìˆ˜ì¸ê°€?
- âœ… ê° ìºë¦­í„°ì˜ `hasImage: true` ì¸ê°€?
- âœ… `imageSize: XXXXX` - í”„ë¡ íŠ¸ì—”ë“œì™€ ê°™ì€ í¬ê¸°ì¸ê°€?

**ë¬¸ì œ ë°œê²¬ ì‹œ:**
- ê°œìˆ˜ê°€ ë‹¤ë¥´ê±°ë‚˜ ë°ì´í„°ê°€ ì—†ìŒ â†’ API ì „ì†¡ ë¬¸ì œ. ë„¤íŠ¸ì›Œí¬ íƒ­ í™•ì¸

---

### ğŸ“ ì²´í¬í¬ì¸íŠ¸ 3: ë ˆí¼ëŸ°ìŠ¤ í•„í„°ë§
```
====================================================================================================
ğŸ¯ FILTERING: Relevant references for this scene
====================================================================================================
```

**â— ì¤‘ìš”: ì—¬ê¸°ì„œ ë ˆí¼ëŸ°ìŠ¤ê°€ ì œì™¸ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**

**í™•ì¸ ì‚¬í•­:**
- âœ… `Relevant Characters: X out of Y`
  - Xê°€ 0ì´ë©´ â†’ **ë¬¸ì œ ë°œê²¬!**
  - ì¥ë©´ ì„¤ëª…ì— ìºë¦­í„° ì´ë¦„ì´ ì—†ì–´ì„œ í•„í„°ë§ë¨

**í•´ê²° ë°©ë²•:**
```
ì˜ˆì‹œ:
âŒ ì¥ë©´ ì„¤ëª…: "A young woman sits at a desk reading a book"
   â†’ ìºë¦­í„° ì´ë¦„ "Erin"ì´ ì—†ì–´ì„œ í•„í„°ë§ë¨!

âœ… ì¥ë©´ ì„¤ëª…: "Erin, a young woman, sits at a desk reading a book"
   â†’ ìºë¦­í„° ì´ë¦„ "Erin"ì´ í¬í•¨ë˜ì–´ ë ˆí¼ëŸ°ìŠ¤ ì ìš©ë¨!
```

**ì¦‰ì‹œ í•´ê²°:**
1. ì¥ë©´ ì„¤ëª… í¸ì§‘ ë²„íŠ¼ í´ë¦­ (ì—°í•„ ì•„ì´ì½˜)
2. ìºë¦­í„° ì´ë¦„ì„ ì„¤ëª…ì— ì¶”ê°€
3. ì €ì¥ í›„ ë‹¤ì‹œ ì´ë¯¸ì§€ ìƒì„±

---

### ğŸ“ ì²´í¬í¬ì¸íŠ¸ 4: Gemini API ì „ì†¡ êµ¬ì¡°
```
====================================================================================================
ğŸ“¦ PARTS ARRAY STRUCTURE
====================================================================================================
Total parts: X
Part 1: TEXT (XXXX chars)
Part 2: IMAGE (MimeType: image/jpeg, Data size: XXXXX)
Part 3: TEXT (XXXX chars)
Part 4: IMAGE (MimeType: image/png, Data size: XXXXX)
...
```

**í™•ì¸ ì‚¬í•­:**
- âœ… IMAGE íŒŒíŠ¸ê°€ ìˆëŠ”ê°€?
- âœ… Data sizeê°€ 0ì´ ì•„ë‹Œê°€?
- âœ… IMAGE íŒŒíŠ¸ ê°œìˆ˜ = (ìºë¦­í„° ìˆ˜ + ë°°ê²½ ìˆ˜ + ì•„íŠ¸ ìŠ¤íƒ€ì¼)?

**ì˜ˆìƒ êµ¬ì¡°:**
```
Part 1: TEXT - ì´ˆê¸° ì§€ì‹œì‚¬í•­
Part 2: TEXT - ìºë¦­í„° 1 ì„¤ëª…
Part 3: IMAGE - ìºë¦­í„° 1 ì´ë¯¸ì§€
Part 4: TEXT - ì•„íŠ¸ ìŠ¤íƒ€ì¼ ì„¤ëª…
Part 5: IMAGE - ì•„íŠ¸ ìŠ¤íƒ€ì¼ ì´ë¯¸ì§€
Part 6: TEXT - ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸
```

---

### ğŸ“ ì²´í¬í¬ì¸íŠ¸ 5: ì „ì²´ í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸
```
====================================================================================================
ğŸ“ FULL TEXT PROMPT being sent to Gemini:
====================================================================================================
```

**í™•ì¸ ì‚¬í•­:**
- âœ… "ğŸ‘¤ CHARACTER REFERENCE #1" ì„¹ì…˜ì´ ìˆëŠ”ê°€?
- âœ… "ğŸ¨ ART STYLE REFERENCE" ì„¹ì…˜ì´ ìˆëŠ”ê°€?
- âœ… "DETAILED CHARACTER DESCRIPTION" ë¶„ì„ ë‚´ìš©ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ê°€?

---

## 4. ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²°ì±…

### ë¬¸ì œ 1: ë ˆí¼ëŸ°ìŠ¤ê°€ ì „í˜€ ì ìš©ë˜ì§€ ì•ŠìŒ
**ì›ì¸:** ì¥ë©´ ì„¤ëª…ì— ìºë¦­í„°/ë°°ê²½ ì´ë¦„ì´ ì—†ì–´ì„œ í•„í„°ë§ë¨
**í•´ê²°:** ì¥ë©´ ì„¤ëª…ì— ìºë¦­í„° ì´ë¦„ ì¶”ê°€

### ë¬¸ì œ 2: ì•„íŠ¸ ìŠ¤íƒ€ì¼ì˜ ìºë¦­í„°ê°€ ë³µì‚¬ë¨
**ì›ì¸:** Gemini AIê°€ ì§€ì‹œë¥¼ ë¬´ì‹œí•˜ê³  ì•„íŠ¸ ìŠ¤íƒ€ì¼ ì´ë¯¸ì§€ì˜ ìºë¦­í„°ë¥¼ ë³µì‚¬
**í•´ê²°:**
- ì•„íŠ¸ ìŠ¤íƒ€ì¼ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ê³  ì¬ë¶„ì„
- í”„ë¡¬í”„íŠ¸ ì„¹ì…˜ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ê°•ì¡° ì¶”ê°€

### ë¬¸ì œ 3: ì´ë¯¸ì§€ê°€ ì „ì†¡ë˜ì§€ ì•ŠìŒ
**ì›ì¸:** imageSize: 0 ë˜ëŠ” hasImage: false
**í•´ê²°:** ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ì—…ë¡œë“œ

### ë¬¸ì œ 4: ë¶„ì„ ë‚´ìš©ì´ ì—†ìŒ
**ì›ì¸:** hasDescription: false
**í•´ê²°:** AI ë¶„ì„ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„ ë‹¤ì‹œ ì‹œë„

---

## 5. ë¡œê·¸ ì €ì¥í•˜ê¸°

ë¬¸ì œë¥¼ ë³´ê³ í•  ë•Œ ë‹¤ìŒ ë¡œê·¸ë¥¼ ë³µì‚¬í•´ì„œ ì œê³µí•˜ì„¸ìš”:

1. ë¸Œë¼ìš°ì € Consoleì—ì„œ ë§ˆìš°ìŠ¤ ìš°í´ë¦­
2. "Save as..." ì„ íƒ
3. ë¡œê·¸ íŒŒì¼ ì €ì¥

ë˜ëŠ”:

1. Console ë¡œê·¸ ì „ì²´ ì„ íƒ (Ctrl+A)
2. ë³µì‚¬ (Ctrl+C)
3. í…ìŠ¤íŠ¸ íŒŒì¼ì— ë¶™ì—¬ë„£ê¸°

---

## 6. ë¹ ë¥¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì´ë¯¸ì§€ ìƒì„± ì „ì— í™•ì¸í•˜ì„¸ìš”:

- [ ] ìºë¦­í„° ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ ë“±ë¡ë¨ (ì¸ë„¤ì¼ í™•ì¸)
- [ ] ìºë¦­í„° ë¶„ì„ ì™„ë£Œë¨ (ë¶„ì„ ë‚´ìš© í¼ì³ì„œ í™•ì¸)
- [ ] ì¥ë©´ ì„¤ëª…ì— ìºë¦­í„° ì´ë¦„ í¬í•¨ë¨
- [ ] ì•„íŠ¸ ìŠ¤íƒ€ì¼ ë ˆí¼ëŸ°ìŠ¤ ë“±ë¡ ë° ë¶„ì„ ì™„ë£Œ (ì„ íƒì‚¬í•­)
- [ ] ë°°ê²½ ë ˆí¼ëŸ°ìŠ¤ ë“±ë¡ ë° ë¶„ì„ ì™„ë£Œ (ì„ íƒì‚¬í•­)

---

## 7. ê³ ê¸‰: ê°•ì œë¡œ ëª¨ë“  ë ˆí¼ëŸ°ìŠ¤ ì‚¬ìš©í•˜ê¸°

ìºë¦­í„° ì´ë¦„ í•„í„°ë§ì„ ìš°íšŒí•˜ë ¤ë©´:

**ì„ì‹œ í•´ê²°ì±…:**
`api/generate-illustration.ts:53-63` ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì—¬ í•„í„°ë§ ë¹„í™œì„±í™”

```typescript
// ê¸°ì¡´ (í•„í„°ë§ í™œì„±)
const relevantCharacters = (characters || []).filter((char: any) =>
  char.name.trim() &&
  new RegExp(`\\b${char.name.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')}\\b`, 'i').test(sceneDescription)
);

// ìˆ˜ì • (ëª¨ë“  ìºë¦­í„° ì‚¬ìš©)
const relevantCharacters = characters || [];
```

**ì£¼ì˜:** ì´ë ‡ê²Œ í•˜ë©´ ê´€ë ¨ ì—†ëŠ” ìºë¦­í„°ë„ ëª¨ë“  ì¥ë©´ì— í¬í•¨ë˜ì–´ í”„ë¡¬í”„íŠ¸ê°€ ê¸¸ì–´ì§€ê³  í˜¼ë€ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
